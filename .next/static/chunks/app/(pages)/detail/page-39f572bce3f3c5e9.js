(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{1761:function(e,t,a){Promise.resolve().then(a.bind(a,4472))},4472:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return G}});var n=a(7437),s=a(2265),l=a(9747),i=a(7203),c=a(703);a(7876);var r=a(8024),o=a(7535),d=a(8792),h=a(851),u=a(7907),p=a(4905),j=a(6142);let x={apiKey:"AIzaSyD5ZVkLaEI2ts79xuT2RaiMIBscMzw6w4U",authDomain:"healinglineimg.firebaseapp.com",projectId:"healinglineimg",storageBucket:"healinglineimg.appspot.com",messagingSenderId:"279670227337",appId:a(9079).env.NEXT_PUBLIC_APPID,measurementId:"G-G2RCJN4HJD"},m=(0,j.ZF)(x),g=(0,p.cF)(m);var f=a(7132),N=a.n(f),I=function(e){let t=(0,s.useRef)(null),[a,l]=(0,s.useState)(null),[i,c]=(0,s.useState)(),[r,o]=(0,s.useState)(null),[d,h]=(0,s.useState)(0),u=e=>{let t=(0,p.iH)(g,"test-id/".concat(e.name));(0,p.KV)(t,e).then(async e=>{let t=await (0,p.Jt)((0,p.iH)(g,e.metadata.fullPath))+"?time=".concat(new Date().getTime());x(a=>[...a,{url:t,fullPath:e.metadata.fullPath}])})},[j,x]=(0,s.useState)([]);async function m(){let e=(0,p.iH)(g,"test-id/");(0,p.aF)(e).then(async e=>{let t=[];for(let a of e.items){let e=await (0,p.Jt)(a);t.push({url:e,fullPath:a.fullPath})}x(t)})}return(0,s.useEffect)(()=>{m()},[]),(0,n.jsxs)("div",{className:"webcamtop",children:[(0,n.jsx)(N(),{ref:t,audio:!1,screenshotFormat:"image/jpeg",width:"300px",height:"auto",videoConstraints:{facingMode:{exact:"environment"}}}),(0,n.jsx)("img",{src:a,width:"300",alt:"cell phone rear camera"}),(0,n.jsx)("button",{onClick:()=>{let e=t.current.getScreenshot(),a=new Blob([e],{type:"image/jpeg"});new FormData().append("image",a),o(a),l(e),fetch(e).then(e=>e.blob()).then(e=>{u(new File([e],"capture_".concat(d,".jpg"),{type:"image/jpeg"})),h(d+1)})},children:" Capture photo "}),(0,n.jsxs)("article",{children:[(0,n.jsx)("h2",{children:"사진등록"}),(0,n.jsx)("form",{onSubmit:function(e){e.preventDefault();let t=new FormData(e.target).get("photo"),a=(0,p.iH)(g,"test-id/"+t.name);(0,p.KV)(a,t).then(async e=>{let t=await (0,p.Jt)((0,p.iH)(g,e.metadata.fullPath))+"?time=".concat(new Date().getTime());x(a=>[...a,{url:t,fullPath:e.metadata.fullPath}])})},children:(0,n.jsxs)("p",{children:[(0,n.jsx)("input",{type:"file",name:"photo"}),(0,n.jsx)("button",{children:"등록"})]})})]}),(0,n.jsx)("article",{className:"picurupload1",children:j.map((e,t)=>(0,n.jsxs)("p",{className:"picurupload2",children:[(0,n.jsx)("img",{src:e.url,width:"200",height:"200",alt:"photo"}),(0,n.jsxs)("button",{className:"picurupload3",onClick:()=>{!function(e){let t=(0,p.iH)(g,e);(0,p.oq)(t).then(()=>{x(t=>t.filter(t=>t.fullPath!==e))}).catch(e=>{console.error("파일 삭제 중 오류 발생:",e)})}(e.fullPath)},children:[" ","삭제"]})]},t))})]})},G=function(e){var t,a;let{action:p,seouldata:j,testdata:x,timetam:m}=(0,i.o)(),g=(0,u.useRouter)();(0,s.useEffect)(()=>{p("get")},[]);let[f,N]=(0,s.useState)({GUNAME:"",MAIN_IMG:"",LOT:0,LAT:0,ORG_NAME:"",DATE:"",HMPG_ADDR:"",TITLE:"",ORG_LINK:""}),[G,A]=(0,s.useState)({});(0,s.useEffect)(()=>{N({GUNAME:localStorage.getItem("GUNAME"),MAIN_IMG:localStorage.getItem("MAIN_IMG"),LOT:localStorage.getItem("LOT"),LAT:localStorage.getItem("LAT"),ORG_NAME:localStorage.getItem("ORG_NAME"),DATE:localStorage.getItem("DATE"),HMPG_ADDR:localStorage.getItem("HMPG_ADDR"),TITLE:localStorage.getItem("TITLE"),ORG_LINK:localStorage.getItem("ORG_LINK")})},[]);let M=new Date(f.DATE.split("~")[0]).getTime()-m;M=Math.ceil(M/864e5),(0,s.useEffect)(()=>{A(l.x.filter((e,t)=>f.GUNAME===e.GUNAME&&f.MAIN_IMG===e.MAIN_IMG))},[f.GUNAME]);let _=null===(t=G[0])||void 0===t?void 0:t.adress.split("/")[0],E=null===(a=G[0])||void 0===a?void 0:a.adress.split("/")[1];return(0,n.jsx)(n.Fragment,{children:G.length>0?(0,n.jsxs)("div",{className:"detilcomscss",children:[(0,n.jsx)("h1",{children:"Healing Line Guide"}),(0,n.jsx)("div",{className:"container",children:(0,n.jsx)("figure",{children:(0,n.jsx)(c.default,{src:"".concat(G[0].imgs),width:768,height:550,alt:"a"})})}),(0,n.jsxs)("div",{className:"scroll_wrap",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:f.TITLE}),(0,n.jsxs)("div",{children:[" ",(0,n.jsxs)("p",{children:["D",M>=0?"-"+M:"+"+Math.abs(M)]})]})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(r.G,{icon:o.tLL,width:"20"}),(0,n.jsx)("p",{onClick:e=>{e.target.parentNode.lastChild.style.display="block"},children:_}),(0,n.jsx)(r.G,{className:"fa-chevron ",icon:o.ptq,width:"10"}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{children:"도로명"}),_,(0,n.jsx)("span",{children:"복사 "})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{children:"지번"}),E,(0,n.jsx)("span",{children:"복사 "})]})]}),(0,n.jsxs)("div",{onClick:e=>{e.target.parentNode.parentNode.parentNode.style.display="none"},children:[(0,n.jsx)("span",{}),(0,n.jsx)("span",{})]})]})})]})}),(0,n.jsxs)("p",{children:[(0,n.jsx)(r.G,{icon:o.fT7}),(0,n.jsx)("span",{children:f.DATE})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(r.G,{icon:o.hVn}),(0,n.jsx)("span",{children:_})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(r.G,{icon:o.dLO}),(0,n.jsx)("span",{children:f.ORG_NAME})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(r.G,{icon:o.j1w}),(0,n.jsx)("span",{children:G[0].ponnum})]}),(0,n.jsxs)(d.default,{href:f.ORG_LINK,target:"_blank",children:[(0,n.jsx)("span",{children:"공식 홈페이지"}),(0,n.jsx)(r.G,{icon:o.J9Y})]})]}),(0,n.jsxs)("section",{className:"kakaomap",children:[(0,n.jsx)("h2",{children:"길 찾기"}),(0,n.jsx)(h.Z,{LOT:f.LOT,LAT:f.LAT,ORG_NAME:f.ORG_NAME,MAIN_IMG:f.MAIN_IMG})]}),(0,n.jsx)("button",{onClick:()=>{g.back()},id:"backBtn",title:"뒤로 이동",children:(0,n.jsx)(r.G,{icon:o.DYF})}),(0,n.jsx)("button",{id:"pickcur",title:"남기고 싶은 사진",children:(0,n.jsx)(c.default,{src:"/detail/ellipse.png",width:50,height:50,alt:""})}),(0,n.jsx)(I,{})]}):"Healing Line ...."})}},7876:function(){}},function(e){e.O(0,[676,953,700,786,971,69,744],function(){return e(e.s=1761)}),_N_E=e.O()}]);