(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{617:function(e,t,s){Promise.resolve().then(s.bind(s,2503))},4842:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var n=s(7437),a=s(2265),i=s(4905),l=s(6142);let c={apiKey:"AIzaSyD5ZVkLaEI2ts79xuT2RaiMIBscMzw6w4U",authDomain:"healinglineimg.firebaseapp.com",projectId:"healinglineimg",storageBucket:"healinglineimg.appspot.com",messagingSenderId:"279670227337",appId:s(9079).env.NEXT_PUBLIC_APPID,measurementId:"G-G2RCJN4HJD"},r=(0,l.ZF)(c),d=(0,i.cF)(r);var o=s(7132),h=s.n(o),u=function(e){let t=(0,a.useRef)(null),[s,l]=(0,a.useState)(null),[c,r]=(0,a.useState)(),[o,u]=(0,a.useState)(null),[p,j]=(0,a.useState)(0),x=e=>{let t=(0,i.iH)(d,"test-id/".concat(e.name));(0,i.KV)(t,e).then(async e=>{let t=await (0,i.Jt)((0,i.iH)(d,e.metadata.fullPath))+"?time=".concat(new Date().getTime());g(s=>[...s,{url:t,fullPath:e.metadata.fullPath}])})},[m,g]=(0,a.useState)([]);async function f(){let e=(0,i.iH)(d,"test-id/");(0,i.aF)(e).then(async e=>{let t=[];for(let s of e.items){let e=await (0,i.Jt)(s);t.push({url:e,fullPath:s.fullPath})}g(t)})}return(0,a.useEffect)(()=>{f()},[]),(0,n.jsxs)("div",{className:"webcamtop",children:[(0,n.jsx)(h(),{ref:t,audio:!1,screenshotFormat:"image/jpeg",width:"300px",height:"auto",videoConstraints:{facingMode:{exact:"environment"}}}),(0,n.jsx)("img",{src:s,width:"300",alt:"photo"}),(0,n.jsx)("button",{onClick:()=>{let e=t.current.getScreenshot(),s=new Blob([e],{type:"image/jpeg"});new FormData().append("image",s),u(s),l(e),fetch(e).then(e=>e.blob()).then(e=>{x(new File([e],"capture_".concat(p,".jpg"),{type:"image/jpeg"})),j(p+1)})},children:" Capture photo "}),(0,n.jsxs)("article",{children:[(0,n.jsx)("h2",{children:"사진등록"}),(0,n.jsx)("form",{onSubmit:function(e){e.preventDefault();let t=new FormData(e.target).get("photo"),s=(0,i.iH)(d,"test-id/"+t.name);(0,i.KV)(s,t).then(async e=>{let t=await (0,i.Jt)((0,i.iH)(d,e.metadata.fullPath))+"?time=".concat(new Date().getTime());g(s=>[...s,{url:t,fullPath:e.metadata.fullPath}])})},children:(0,n.jsxs)("p",{children:[(0,n.jsx)("input",{type:"file",name:"photo"}),(0,n.jsx)("button",{children:"등록"})]})})]}),(0,n.jsx)("article",{className:"picurupload1",children:m.map((e,t)=>(0,n.jsxs)("p",{className:"picurupload2",children:[(0,n.jsx)("img",{src:e.url,width:"200",height:"200",alt:"photo"}),(0,n.jsxs)("button",{className:"picurupload3",onClick:()=>{!function(e){let t=(0,i.iH)(d,e);(0,i.oq)(t).then(()=>{g(t=>t.filter(t=>t.fullPath!==e))}).catch(e=>{console.error("파일 삭제 중 오류 발생:",e)})}(e.fullPath)},children:[" ","삭제"]})]},t))})]})}},2503:function(e,t,s){"use strict";s.r(t);var n=s(7437),a=s(2265),i=s(9747),l=s(7203),c=s(703);s(7876);var r=s(8024),d=s(7535),o=s(8792),h=s(851),u=s(7907),p=s(4842);t.default=function(e){var t,s;let{action:j,seouldata:x,testdata:m,timetam:g}=(0,l.o)(),f=(0,u.useRouter)();(0,a.useEffect)(()=>{j("get")},[]);let[N,I]=(0,a.useState)({GUNAME:"",MAIN_IMG:"",LOT:0,LAT:0,ORG_NAME:"",DATE:"",HMPG_ADDR:"",TITLE:"",ORG_LINK:""}),[G,A]=(0,a.useState)({});(0,a.useEffect)(()=>{I({GUNAME:localStorage.getItem("GUNAME"),MAIN_IMG:localStorage.getItem("MAIN_IMG"),LOT:localStorage.getItem("LOT"),LAT:localStorage.getItem("LAT"),ORG_NAME:localStorage.getItem("ORG_NAME"),DATE:localStorage.getItem("DATE"),HMPG_ADDR:localStorage.getItem("HMPG_ADDR"),TITLE:localStorage.getItem("TITLE"),ORG_LINK:localStorage.getItem("ORG_LINK")})},[]);let M=new Date(N.DATE.split("~")[0]).getTime()-g;M=Math.ceil(M/864e5),(0,a.useEffect)(()=>{A(i.x.filter((e,t)=>N.GUNAME===e.GUNAME&&N.MAIN_IMG===e.MAIN_IMG))},[N.GUNAME]);let _=null===(t=G[0])||void 0===t?void 0:t.adress.split("/")[0],E=null===(s=G[0])||void 0===s?void 0:s.adress.split("/")[1];return(0,n.jsx)(n.Fragment,{children:G.length>0?(0,n.jsxs)("div",{className:"detilcomscss",children:[(0,n.jsx)("h1",{children:"Healing Line Guide"}),(0,n.jsx)("div",{className:"container",children:(0,n.jsx)("figure",{children:(0,n.jsx)(c.default,{src:"".concat(G[0].imgs),width:768,height:550,alt:"a"})})}),(0,n.jsxs)("div",{className:"scroll_wrap",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:N.TITLE}),(0,n.jsxs)("div",{children:[" ",(0,n.jsxs)("p",{children:["D",M>=0?"-"+M:"+"+Math.abs(M)]})]})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(r.G,{icon:d.tLL,width:"20"}),(0,n.jsx)("p",{onClick:e=>{e.target.parentNode.lastChild.style.display="block"},children:_}),(0,n.jsx)(r.G,{className:"fa-chevron ",icon:d.ptq,width:"10"}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{children:"도로명"}),_,(0,n.jsx)("span",{children:"복사 "})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{children:"지번"}),E,(0,n.jsx)("span",{children:"복사 "})]})]}),(0,n.jsxs)("div",{onClick:e=>{e.target.parentNode.parentNode.parentNode.style.display="none"},children:[(0,n.jsx)("span",{}),(0,n.jsx)("span",{})]})]})})]})}),(0,n.jsxs)("p",{children:[(0,n.jsx)(r.G,{icon:d.fT7}),(0,n.jsx)("span",{children:N.DATE})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(r.G,{icon:d.hVn}),(0,n.jsx)("span",{children:_})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(r.G,{icon:d.dLO}),(0,n.jsx)("span",{children:N.ORG_NAME})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(r.G,{icon:d.j1w}),(0,n.jsx)("span",{children:G[0].ponnum})]}),(0,n.jsxs)(o.default,{href:N.ORG_LINK,target:"_blank",children:[(0,n.jsx)("span",{children:"공식 홈페이지"}),(0,n.jsx)(r.G,{icon:d.J9Y})]})]}),(0,n.jsxs)("section",{className:"kakaomap",children:[(0,n.jsx)("h2",{children:"길 찾기"}),(0,n.jsx)(h.Z,{LOT:N.LOT,LAT:N.LAT,ORG_NAME:N.ORG_NAME,MAIN_IMG:N.MAIN_IMG})]}),(0,n.jsx)("button",{onClick:()=>{f.back()},id:"backBtn",title:"뒤로 이동",children:(0,n.jsx)(r.G,{icon:d.DYF})}),(0,n.jsx)("button",{id:"pickcur",title:"남기고 싶은 사진",children:(0,n.jsx)(c.default,{src:"/detail/ellipse.png",width:50,height:50,alt:""})}),(0,n.jsx)("section",{children:(0,n.jsxs)("h3",{children:[N.ORG_NAME," 예시 가이드"]})}),(0,n.jsx)(p.default,{})]}):"Healing Line ...."})}},7876:function(){}},function(e){e.O(0,[676,213,703,700,786,971,69,744],function(){return e(e.s=617)}),_N_E=e.O()}]);