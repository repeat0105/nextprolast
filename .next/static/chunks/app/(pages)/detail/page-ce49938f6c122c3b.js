(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{6138:function(e,t,s){Promise.resolve().then(s.bind(s,4472))},4472:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return G}});var n=s(7437),a=s(2265),i=s(9747),l=s(7203),c=s(703);s(7876);var r=s(8024),o=s(7535),d=s(8792),h=s(851),u=s(7907),p=s(4905),j=s(6142);let x={apiKey:"AIzaSyD5ZVkLaEI2ts79xuT2RaiMIBscMzw6w4U",authDomain:"healinglineimg.firebaseapp.com",projectId:"healinglineimg",storageBucket:"healinglineimg.appspot.com",messagingSenderId:"279670227337",appId:s(9079).env.NEXT_PUBLIC_APPID,measurementId:"G-G2RCJN4HJD"},m=(0,j.ZF)(x),g=(0,p.cF)(m);var f=s(7132),N=s.n(f),I=function(e){let t=(0,a.useRef)(null),[s,i]=(0,a.useState)(null),[l,c]=(0,a.useState)(),[r,o]=(0,a.useState)(null),[d,h]=(0,a.useState)(0),u=e=>{let t=(0,p.iH)(g,"test-id/".concat(e.name));(0,p.KV)(t,e).then(async e=>{let t=await (0,p.Jt)((0,p.iH)(g,e.metadata.fullPath))+"?time=".concat(new Date().getTime());x(s=>[...s,{url:t,fullPath:e.metadata.fullPath}])})},[j,x]=(0,a.useState)([]);async function m(){let e=(0,p.iH)(g,"test-id/");(0,p.aF)(e).then(async e=>{let t=[];for(let s of e.items){let e=await (0,p.Jt)(s);t.push({url:e,fullPath:s.fullPath})}x(t)})}return(0,a.useEffect)(()=>{m()},[]),(0,n.jsxs)("div",{className:"webcamtop",children:[(0,n.jsx)(N(),{ref:t,audio:!1,screenshotFormat:"image/jpeg",width:"300px",height:"auto",videoConstraints:{facingMode:{exact:"environment"}}}),(0,n.jsx)("img",{src:s,width:"300",alt:"photo"}),(0,n.jsx)("button",{onClick:()=>{let e=t.current.getScreenshot(),s=new Blob([e],{type:"image/jpeg"});new FormData().append("image",s),o(s),i(e),fetch(e).then(e=>e.blob()).then(e=>{u(new File([e],"capture_".concat(d,".jpg"),{type:"image/jpeg"})),h(d+1)})},children:" Capture photo "}),(0,n.jsxs)("article",{children:[(0,n.jsx)("h2",{children:"사진등록"}),(0,n.jsx)("form",{onSubmit:function(e){e.preventDefault();let t=new FormData(e.target).get("photo"),s=(0,p.iH)(g,"test-id/"+t.name);(0,p.KV)(s,t).then(async e=>{let t=await (0,p.Jt)((0,p.iH)(g,e.metadata.fullPath))+"?time=".concat(new Date().getTime());x(s=>[...s,{url:t,fullPath:e.metadata.fullPath}])})},children:(0,n.jsxs)("p",{children:[(0,n.jsx)("input",{type:"file",name:"photo"}),(0,n.jsx)("button",{children:"등록"})]})})]}),(0,n.jsx)("article",{className:"picurupload1",children:j.map((e,t)=>(0,n.jsxs)("p",{className:"picurupload2",children:[(0,n.jsx)("img",{src:e.url,width:"200",height:"200",alt:"photo"}),(0,n.jsxs)("button",{className:"picurupload3",onClick:()=>{!function(e){let t=(0,p.iH)(g,e);(0,p.oq)(t).then(()=>{x(t=>t.filter(t=>t.fullPath!==e))}).catch(e=>{console.error("파일 삭제 중 오류 발생:",e)})}(e.fullPath)},children:[" ","삭제"]})]},t))})]})},G=function(e){var t,s;let{action:p,seouldata:j,testdata:x,timetam:m}=(0,l.o)(),g=(0,u.useRouter)();(0,a.useEffect)(()=>{p("get")},[]);let[f,N]=(0,a.useState)({GUNAME:"",MAIN_IMG:"",LOT:0,LAT:0,ORG_NAME:"",DATE:"",HMPG_ADDR:"",TITLE:"",ORG_LINK:""}),[G,A]=(0,a.useState)({});(0,a.useEffect)(()=>{N({GUNAME:localStorage.getItem("GUNAME"),MAIN_IMG:localStorage.getItem("MAIN_IMG"),LOT:localStorage.getItem("LOT"),LAT:localStorage.getItem("LAT"),ORG_NAME:localStorage.getItem("ORG_NAME"),DATE:localStorage.getItem("DATE"),HMPG_ADDR:localStorage.getItem("HMPG_ADDR"),TITLE:localStorage.getItem("TITLE"),ORG_LINK:localStorage.getItem("ORG_LINK")})},[]);let M=new Date(f.DATE.split("~")[0]).getTime()-m;M=Math.ceil(M/864e5),(0,a.useEffect)(()=>{A(i.x.filter((e,t)=>f.GUNAME===e.GUNAME&&f.MAIN_IMG===e.MAIN_IMG))},[f.GUNAME]);let _=null===(t=G[0])||void 0===t?void 0:t.adress.split("/")[0],E=null===(s=G[0])||void 0===s?void 0:s.adress.split("/")[1];return(0,n.jsx)(n.Fragment,{children:G.length>0?(0,n.jsxs)("div",{className:"detilcomscss",children:[(0,n.jsx)("h1",{children:"Healing Line Guide"}),(0,n.jsx)("div",{className:"container",children:(0,n.jsx)("figure",{children:(0,n.jsx)(c.default,{src:"".concat(G[0].imgs),width:768,height:550,alt:"a"})})}),(0,n.jsxs)("div",{className:"scroll_wrap",children:[(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:f.TITLE}),(0,n.jsxs)("div",{children:[" ",(0,n.jsxs)("p",{children:["D",M>=0?"-"+M:"+"+Math.abs(M)]})]})]})}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[(0,n.jsx)(r.G,{icon:o.tLL,width:"20"}),(0,n.jsx)("p",{onClick:e=>{e.target.parentNode.lastChild.style.display="block"},children:_}),(0,n.jsx)(r.G,{className:"fa-chevron ",icon:o.ptq,width:"10"}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{children:"도로명"}),_,(0,n.jsx)("span",{children:"복사 "})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("span",{children:"지번"}),E,(0,n.jsx)("span",{children:"복사 "})]})]}),(0,n.jsxs)("div",{onClick:e=>{e.target.parentNode.parentNode.parentNode.style.display="none"},children:[(0,n.jsx)("span",{}),(0,n.jsx)("span",{})]})]})})]})}),(0,n.jsxs)("p",{children:[(0,n.jsx)(r.G,{icon:o.fT7}),(0,n.jsx)("span",{children:f.DATE})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(r.G,{icon:o.hVn}),(0,n.jsx)("span",{children:_})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(r.G,{icon:o.dLO}),(0,n.jsx)("span",{children:f.ORG_NAME})]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(r.G,{icon:o.j1w}),(0,n.jsx)("span",{children:G[0].ponnum})]}),(0,n.jsxs)(d.default,{href:f.ORG_LINK,target:"_blank",children:[(0,n.jsx)("span",{children:"공식 홈페이지"}),(0,n.jsx)(r.G,{icon:o.J9Y})]})]}),(0,n.jsxs)("section",{className:"kakaomap",children:[(0,n.jsx)("h2",{children:"길 찾기"}),(0,n.jsx)(h.Z,{LOT:f.LOT,LAT:f.LAT,ORG_NAME:f.ORG_NAME,MAIN_IMG:f.MAIN_IMG})]}),(0,n.jsx)("button",{onClick:()=>{g.back()},id:"backBtn",title:"뒤로 이동",children:(0,n.jsx)(r.G,{icon:o.DYF})}),(0,n.jsx)("button",{id:"pickcur",title:"남기고 싶은 사진",children:(0,n.jsx)(c.default,{src:"/detail/ellipse.png",width:50,height:50,alt:""})}),(0,n.jsx)("section",{children:(0,n.jsxs)("h3",{children:[f.ORG_NAME," 예시 가이드"]})}),(0,n.jsx)(I,{})]}):"Healing Line ...."})}},7876:function(){}},function(e){e.O(0,[676,953,700,786,971,69,744],function(){return e(e.s=6138)}),_N_E=e.O()}]);